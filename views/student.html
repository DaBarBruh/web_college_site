<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>üåÄ –ö–æ—Å–º–∏—á–µ—Å–∫–∏–π 3D –ì–∏–ø–µ—Ä–∫—É–± | –ì–∏—Ä–æ—Å–∫–æ–ø + WebGL</title>
    <style>
        /* –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: 'Exo 2', 'Segoe UI', Arial, sans-serif;
            background: #000;
            color: #fff;
            position: fixed;
            touch-action: none;
        }

        /* –§–æ–Ω —Å –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º */
        .background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -3;
            background: 
                radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(120, 219, 255, 0.25) 0%, transparent 50%),
                linear-gradient(135deg, #0a0a1a 0%, #151530 50%, #0a0a1a 100%);
            animation: gradientShift 20s ease infinite alternate;
        }

        @keyframes gradientShift {
            0% { filter: hue-rotate(0deg); }
            100% { filter: hue-rotate(360deg); }
        }

        /* –ó–≤—ë–∑–¥–Ω–æ–µ –ø–æ–ª–µ */
        #stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            opacity: 0.7;
        }

        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã */
        .container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            padding: 20px;
            overflow: hidden;
        }

        /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º –Ω–µ–æ–Ω–∞ */
        .title-container {
            text-align: center;
            z-index: 100;
            padding: 20px;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(15px);
            border-radius: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.5),
                0 0 0 1px rgba(255, 255, 255, 0.05),
                0 0 100px rgba(100, 100, 255, 0.1),
                inset 0 0 50px rgba(255, 255, 255, 0.05);
            margin-bottom: 20px;
            animation: titleFloat 6s ease-in-out infinite;
            position: relative;
            overflow: hidden;
        }

        .title-container::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, 
                #ff00cc, #00ccff, #00ffcc, #ffcc00,
                #ff00cc, #00ccff, #00ffcc, #ffcc00);
            background-size: 400%;
            border-radius: 32px;
            z-index: -1;
            animation: borderGlow 10s linear infinite;
            filter: blur(10px);
            opacity: 0.7;
        }

        @keyframes borderGlow {
            0% { background-position: 0% 50%; }
            100% { background-position: 400% 50%; }
        }

        @keyframes titleFloat {
            0%, 100% { transform: translateY(0) rotateX(0.5deg); }
            50% { transform: translateY(-10px) rotateX(-0.5deg); }
        }

        h1 {
            font-size: 3.2rem;
            font-weight: 900;
            margin-bottom: 10px;
            background: linear-gradient(45deg, 
                #ff3366, #33ffcc, #3366ff, #ff33cc);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 
                0 0 30px rgba(255, 51, 102, 0.5),
                0 0 60px rgba(51, 204, 255, 0.3),
                0 0 90px rgba(51, 102, 255, 0.2);
            animation: titleGradient 8s ease infinite;
            letter-spacing: 2px;
            position: relative;
        }

        @keyframes titleGradient {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .subtitle {
            font-size: 1.3rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–π 3D –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
        .scene-wrapper {
            position: relative;
            width: 100%;
            flex: 1;
            max-width: 1200px;
            min-height: 400px;
            perspective: 2000px;
            margin: 20px auto;
            overflow: hidden;
            border-radius: 40px;
            box-shadow: 
                0 0 100px rgba(100, 200, 255, 0.3),
                0 0 200px rgba(100, 100, 255, 0.2),
                inset 0 0 100px rgba(255, 255, 255, 0.05);
            background: 
                radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.03) 0%, transparent 70%),
                linear-gradient(135deg, rgba(20, 20, 40, 0.9) 0%, rgba(10, 10, 30, 0.95) 100%);
        }

        #scene3d {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.05s linear;
            overflow: visible;
        }

        /* –ì–∏–ø–µ—Ä–∫—É–± (—Ç–µ—Å—Å–µ—Ä–∞–∫—Ç) */
        .tesseract {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 300px;
            height: 300px;
            transform-style: preserve-3d;
            transform: translate(-50%, -50%);
        }

        .cube {
            position: absolute;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
        }

        .cube-outer {
            transform: translateZ(150px);
        }

        .cube-inner {
            transform: translateZ(75px) scale(0.5);
        }

        .face {
            position: absolute;
            width: 100%;
            height: 100%;
            border: 2px solid;
            border-image: linear-gradient(45deg, #ff3366, #33ffcc) 1;
            background: rgba(255, 255, 255, 0.02);
            backdrop-filter: blur(10px);
            box-shadow: 
                inset 0 0 50px rgba(255, 255, 255, 0.05),
                0 0 30px rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: bold;
            opacity: 0.9;
        }

        /* –ì—Ä–∞–Ω–∏ –≤–Ω–µ—à–Ω–µ–≥–æ –∫—É–±–∞ */
        .front  { transform: translateZ(150px); border-image: linear-gradient(45deg, #ff3366, #ff9966) 1; }
        .back   { transform: rotateY(180deg) translateZ(150px); border-image: linear-gradient(45deg, #33ffcc, #3366ff) 1; }
        .right  { transform: rotateY(90deg) translateZ(150px); border-image: linear-gradient(45deg, #9966ff, #ff66cc) 1; }
        .left   { transform: rotateY(-90deg) translateZ(150px); border-image: linear-gradient(45deg, #66ff99, #33ccff) 1; }
        .top    { transform: rotateX(90deg) translateZ(150px); border-image: linear-gradient(45deg, #ffcc00, #ff6666) 1; }
        .bottom { transform: rotateX(-90deg) translateZ(150px); border-image: linear-gradient(45deg, #66ccff, #9966ff) 1; }

        /* –ì—Ä–∞–Ω–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∫—É–±–∞ */
        .face.inner {
            border-width: 3px;
            border-image: linear-gradient(45deg, #00ffcc, #cc00ff) 1;
            background: rgba(255, 255, 255, 0.03);
            box-shadow: 
                inset 0 0 30px rgba(255, 255, 255, 0.1),
                0 0 20px rgba(0, 255, 255, 0.3);
        }

        /* –°–æ–µ–¥–∏–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ª–∏–Ω–∏–∏ –º–µ–∂–¥—É –∫—É–±–∞–º–∏ */
        .connection {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 2px;
            height: 75px;
            background: linear-gradient(to bottom, 
                rgba(255, 51, 102, 0.8) 0%,
                rgba(51, 255, 204, 0.8) 50%,
                rgba(51, 102, 255, 0.8) 100%);
            transform-origin: top center;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 10px rgba(51, 255, 204, 0.5);
        }

        /* –ß–∞—Å—Ç–∏—Ü—ã */
        #particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #fff;
            border-radius: 50%;
            box-shadow: 0 0 10px currentColor;
        }

        /* –°—Ñ–µ—Ä—ã-–ø–ª–∞–Ω–µ—Ç—ã –Ω–∞ –∑–∞–¥–Ω–µ–º –ø–ª–∞–Ω–µ */
        .orb {
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, 
                rgba(255, 255, 255, 0.1) 0%,
                rgba(255, 255, 255, 0) 70%);
            box-shadow: 
                inset 0 0 50px rgba(255, 255, 255, 0.05),
                0 0 100px rgba(100, 200, 255, 0.2);
            filter: blur(1px);
            z-index: -1;
        }

        .orb-1 {
            width: 400px;
            height: 400px;
            top: -100px;
            right: -100px;
            background: radial-gradient(circle at 30% 30%, 
                rgba(255, 100, 100, 0.1) 0%,
                rgba(255, 100, 100, 0) 70%);
            animation: orbFloat1 25s ease-in-out infinite;
        }

        .orb-2 {
            width: 300px;
            height: 300px;
            bottom: -50px;
            left: -100px;
            background: radial-gradient(circle at 70% 30%, 
                rgba(100, 200, 255, 0.1) 0%,
                rgba(100, 200, 255, 0) 70%);
            animation: orbFloat2 30s ease-in-out infinite;
        }

        @keyframes orbFloat1 {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(50px, 50px) rotate(120deg); }
            66% { transform: translate(-30px, 70px) rotate(240deg); }
        }

        @keyframes orbFloat2 {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(-70px, -30px) rotate(-120deg); }
            66% { transform: translate(40px, -50px) rotate(-240deg); }
        }

        /* –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        .control-panel {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 20px;
            z-index: 1000;
            padding: 20px;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 
                0 20px 50px rgba(0, 0, 0, 0.5),
                0 0 0 1px rgba(255, 255, 255, 0.05),
                inset 0 0 30px rgba(255, 255, 255, 0.03);
        }

        .control-btn {
            padding: 15px 25px;
            background: linear-gradient(45deg, #1a1a2e, #16213e);
            border: none;
            border-radius: 15px;
            color: #fff;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            min-width: 150px;
            text-align: center;
            box-shadow: 
                0 10px 20px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .control-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.1), 
                transparent);
            transition: left 0.5s;
        }

        .control-btn:hover::before {
            left: 100%;
        }

        .control-btn:hover {
            transform: translateY(-3px);
            box-shadow: 
                0 15px 30px rgba(0, 0, 0, 0.4),
                0 0 20px rgba(100, 200, 255, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .control-btn:active {
            transform: translateY(0);
        }

        .control-btn.active {
            background: linear-gradient(45deg, #ff3366, #33ffcc);
            box-shadow: 
                0 0 30px rgba(51, 255, 204, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        /* –ü–∞–Ω–µ–ª—å –¥–∞–Ω–Ω—ã—Ö —Å–µ–Ω—Å–æ—Ä–æ–≤ */
        .sensor-panel {
            position: fixed;
            top: 30px;
            right: 30px;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.4),
                inset 0 0 30px rgba(255, 255, 255, 0.03);
            z-index: 1000;
            min-width: 280px;
            transform: translateZ(0);
        }

        .sensor-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .sensor-header h3 {
            font-size: 1.4rem;
            background: linear-gradient(45deg, #33ffcc, #3366ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .sensor-value {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .sensor-value:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateX(-5px);
        }

        .sensor-label {
            font-weight: 600;
            color: #33ffcc;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .sensor-data {
            font-family: 'Courier New', monospace;
            font-size: 1.2rem;
            font-weight: bold;
            color: #ff3366;
            text-shadow: 0 0 10px rgba(255, 51, 102, 0.5);
        }

        /* –í–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä—ã –¥–∞–Ω–Ω—ã—Ö */
        .visualizer {
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            margin-top: 5px;
            overflow: hidden;
        }

        .visualizer-bar {
            height: 100%;
            width: 50%;
            background: linear-gradient(90deg, #ff3366, #33ffcc);
            border-radius: 3px;
            transition: width 0.1s linear;
        }

        /* –û–≤–µ—Ä–ª–µ–π –∑–∞–≥—Ä—É–∑–∫–∏ */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            transition: opacity 1s ease;
        }

        .loading-text {
            font-size: 2.5rem;
            margin-bottom: 30px;
            background: linear-gradient(45deg, #ff3366, #33ffcc, #3366ff);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: loadingGradient 3s ease infinite;
        }

        @keyframes loadingGradient {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .loading-bar {
            width: 300px;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
        }

        .loading-progress {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #ff3366, #33ffcc);
            border-radius: 2px;
            transition: width 0.3s ease;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            h1 { font-size: 2rem; }
            .subtitle { font-size: 1rem; padding: 0 20px; }
            .control-panel { flex-direction: column; gap: 10px; }
            .control-btn { min-width: 200px; }
            .sensor-panel { 
                position: relative;
                top: auto;
                right: auto;
                margin: 20px auto;
                width: 90%;
            }
            .scene-wrapper { border-radius: 20px; }
        }

        /* –ü—É–ª—Å–∞—Ü–∏—è –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ */
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
        }

        .pulse {
            animation: pulse 2s ease-in-out infinite;
        }

        /* –≠—Ñ—Ñ–µ–∫—Ç —Å—Ç–µ–∫–ª—è–Ω–Ω–æ–π –º–æ—Ä—Ñ–æ–ª–æ–≥–∏–∏ */
        .glass-effect {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.2),
                inset 0 0 20px rgba(255, 255, 255, 0.05);
        }

        /* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in-up {
            animation: fadeInUp 0.8s ease forwards;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- –§–æ–Ω —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π -->
    <div class="background"></div>
    
    <!-- –ó–≤—ë–∑–¥–Ω–æ–µ –ø–æ–ª–µ -->
    <canvas id="stars"></canvas>
    
    <!-- –°—Ñ–µ—Ä—ã –Ω–∞ –∑–∞–¥–Ω–µ–º –ø–ª–∞–Ω–µ -->
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    
    <!-- –û–≤–µ—Ä–ª–µ–π –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-text">–ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ì–ò–ü–ï–†–ö–£–ë–ê</div>
        <div class="loading-bar">
            <div class="loading-progress" id="loadingProgress"></div>
        </div>
    </div>
    
    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
    <div class="container">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <div class="title-container fade-in-up">
            <h1><i class="fas fa-cube"></i> –ì–ò–ü–ï–†–ö–£–ë 4D</h1>
            <div class="subtitle">
                –ù–∞–∫–ª–æ–Ω—è–π—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è 4D-—Ç–µ—Å—Å–µ—Ä–∞–∫—Ç–æ–º –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.
                –ì–∏—Ä–æ—Å–∫–æ–ø + –ê–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä + WebGL —É—Å–∫–æ—Ä–µ–Ω–∏–µ
            </div>
        </div>
        
        <!-- –û—Å–Ω–æ–≤–Ω–∞—è 3D —Å—Ü–µ–Ω–∞ -->
        <div class="scene-wrapper">
            <div id="scene3d">
                <!-- –¢–µ—Å—Å–µ—Ä–∞–∫—Ç (–≥–∏–ø–µ—Ä–∫—É–±) -->
                <div class="tesseract" id="tesseract">
                    <!-- –í–Ω–µ—à–Ω–∏–π –∫—É–± -->
                    <div class="cube cube-outer">
                        <div class="face front pulse"><span>X+</span></div>
                        <div class="face back"><span>X-</span></div>
                        <div class="face right"><span>Y+</span></div>
                        <div class="face left"><span>Y-</span></div>
                        <div class="face top"><span>Z+</span></div>
                        <div class="face bottom"><span>Z-</span></div>
                    </div>
                    
                    <!-- –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∫—É–± -->
                    <div class="cube cube-inner">
                        <div class="face front inner"><span>W+</span></div>
                        <div class="face back inner"><span>W-</span></div>
                        <div class="face right inner"><span>V+</span></div>
                        <div class="face left inner"><span>V-</span></div>
                        <div class="face top inner"><span>U+</span></div>
                        <div class="face bottom inner"><span>U-</span></div>
                    </div>
                    
                    <!-- –°–æ–µ–¥–∏–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ª–∏–Ω–∏–∏ (–≤–µ—Ä—à–∏–Ω—ã) -->
                    <div class="connection" style="transform: translate(-50%, -50%) rotateX(0deg) rotateY(0deg)"></div>
                    <div class="connection" style="transform: translate(-50%, -50%) rotateX(0deg) rotateY(90deg)"></div>
                    <div class="connection" style="transform: translate(-50%, -50%) rotateX(0deg) rotateY(180deg)"></div>
                    <div class="connection" style="transform: translate(-50%, -50%) rotateX(0deg) rotateY(270deg)"></div>
                    <div class="connection" style="transform: translate(-50%, -50%) rotateX(90deg) rotateY(0deg)"></div>
                    <div class="connection" style="transform: translate(-50%, -50%) rotateX(90deg) rotateY(90deg)"></div>
                    <div class="connection" style="transform: translate(-50%, -50%) rotateX(90deg) rotateY(180deg)"></div>
                    <div class="connection" style="transform: translate(-50%, -50%) rotateX(90deg) rotateY(270deg)"></div>
                </div>
            </div>
            
            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —á–∞—Å—Ç–∏—Ü -->
            <div id="particles"></div>
        </div>
        
        <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
        <div class="control-panel fade-in-up">
            <button class="control-btn active" id="mode3d">
                <i class="fas fa-cube"></i> 3D –†–µ–∂–∏–º
            </button>
            <button class="control-btn" id="mode4d">
                <i class="fas fa-tesseract"></i> 4D –ì–∏–ø–µ—Ä–∫—É–±
            </button>
            <button class="control-btn" id="modeSpin">
                <i class="fas fa-sync-alt"></i> –ê–≤—Ç–æ–≤—Ä–∞—â–µ–Ω–∏–µ
            </button>
            <button class="control-btn" id="resetBtn">
                <i class="fas fa-redo"></i> –°–±—Ä–æ—Å
            </button>
        </div>
    </div>
    
    <!-- –ü–∞–Ω–µ–ª—å –¥–∞–Ω–Ω—ã—Ö —Å–µ–Ω—Å–æ—Ä–æ–≤ -->
    <div class="sensor-panel fade-in-up">
        <div class="sensor-header">
            <i class="fas fa-microchip"></i>
            <h3>–î–ê–¢–ß–ò–ö–ò –£–°–¢–†–û–ô–°–¢–í–ê</h3>
        </div>
        
        <div class="sensor-value">
            <div class="sensor-label">
                <i class="fas fa-compass"></i>
                <span>–ê–ª—å—Ñ–∞ (Z):</span>
            </div>
            <div class="sensor-data" id="alphaValue">0.00¬∞</div>
        </div>
        <div class="visualizer">
            <div class="visualizer-bar" id="alphaBar"></div>
        </div>
        
        <div class="sensor-value">
            <div class="sensor-label">
                <i class="fas fa-arrows-alt-v"></i>
                <span>–ë–µ—Ç–∞ (X):</span>
            </div>
            <div class="sensor-data" id="betaValue">0.00¬∞</div>
        </div>
        <div class="visualizer">
            <div class="visualizer-bar" id="betaBar"></div>
        </div>
        
        <div class="sensor-value">
            <div class="sensor-label">
                <i class="fas fa-arrows-alt-h"></i>
                <span>–ì–∞–º–º–∞ (Y):</span>
            </div>
            <div class="sensor-data" id="gammaValue">0.00¬∞</div>
        </div>
        <div class="visualizer">
            <div class="visualizer-bar" id="gammaBar"></div>
        </div>
        
        <div class="sensor-value">
            <div class="sensor-label">
                <i class="fas fa-sync-alt"></i>
                <span>–í—Ä–∞—â–µ–Ω–∏–µ X:</span>
            </div>
            <div class="sensor-data" id="rotateXValue">0.00¬∞</div>
        </div>
        
        <div class="sensor-value">
            <div class="sensor-label">
                <i class="fas fa-sync-alt"></i>
                <span>–í—Ä–∞—â–µ–Ω–∏–µ Y:</span>
            </div>
            <div class="sensor-data" id="rotateYValue">0.00¬∞</div>
        </div>
        
        <div class="sensor-value">
            <div class="sensor-label">
                <i class="fas fa-bolt"></i>
                <span>FPS:</span>
            </div>
            <div class="sensor-data" id="fpsValue">60</div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è iOS —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π -->
    <div id="iosPermissionModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 10000; justify-content: center; align-items: center;">
        <div style="background: rgba(20,20,40,0.95); padding: 40px; border-radius: 30px; max-width: 500px; text-align: center; border: 2px solid #33ffcc;">
            <h2 style="color: #33ffcc; margin-bottom: 20px;"><i class="fas fa-mobile-alt"></i> –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ</h2>
            <p style="margin-bottom: 30px; line-height: 1.6;">–î–ª—è —Ä–∞–±–æ—Ç—ã 3D-—ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –¥–∞—Ç—á–∏–∫–∞–º –¥–≤–∏–∂–µ–Ω–∏—è –≤–∞—à–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.</p>
            <button id="iosPermissionBtn" style="background: linear-gradient(45deg, #ff3366, #33ffcc); border: none; padding: 15px 40px; border-radius: 25px; color: white; font-size: 1.2rem; cursor: pointer; font-weight: bold;">
                –†–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –¥–∞—Ç—á–∏–∫–∞–º
            </button>
        </div>
    </div>

    <script>
        // ========== –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï ==========
        let scene3d = document.getElementById('scene3d');
        let tesseract = document.getElementById('tesseract');
        let particlesContainer = document.getElementById('particles');
        let loadingOverlay = document.getElementById('loadingOverlay');
        let loadingProgress = document.getElementById('loadingProgress');
        
        // –î–∞–Ω–Ω—ã–µ —Å–µ–Ω—Å–æ—Ä–æ–≤
        let alpha = 0, beta = 0, gamma = 0;
        let rotationX = 0, rotationY = 0;
        let targetRotationX = 0, targetRotationY = 0;
        let currentRotationX = 0, currentRotationY = 0;
        
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∏
        const SMOOTHING_FACTOR = 0.12;
        const MAX_ROTATION = 45;
        let autoRotation = false;
        let hypercubeMode = false;
        let mouseControl = false;
        let lastMouseX = 0, lastMouseY = 0;
        
        // –ß–∞—Å—Ç–∏—Ü—ã
        let particles = [];
        const PARTICLE_COUNT = 200;
        
        // FPS —Å—á–µ—Ç—á–∏–∫
        let lastTime = 0;
        let frameCount = 0;
        let fps = 60;
        
        // ========== –ó–í–Å–ó–î–ù–û–ï –ü–û–õ–ï (Canvas) ==========
        function initStars() {
            const canvas = document.getElementById('stars');
            const ctx = canvas.getContext('2d');
            
            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞–∑–º–µ—Ä–æ–≤
            function resizeCanvas() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }
            
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
            
            // –°–æ–∑–¥–∞–Ω–∏–µ –∑–≤—ë–∑–¥
            const stars = [];
            const starCount = Math.min(500, Math.floor((window.innerWidth * window.innerHeight) / 1000));
            
            for (let i = 0; i < starCount; i++) {
                stars.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    radius: Math.random() * 1.5 + 0.5,
                    speed: Math.random() * 0.5 + 0.1,
                    brightness: Math.random() * 0.5 + 0.5
                });
            }
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –∑–≤—ë–∑–¥
            function animateStars() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // –†–∏—Å—É–µ–º –∑–≤—ë–∑–¥—ã
                stars.forEach(star => {
                    // –ú–µ—Ä—Ü–∞–Ω–∏–µ
                    const twinkle = Math.sin(Date.now() * 0.001 * star.speed) * 0.3 + 0.7;
                    
                    ctx.beginPath();
                    ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
                    
                    // –ì—Ä–∞–¥–∏–µ–Ω—Ç –¥–ª—è –∑–≤–µ–∑–¥—ã
                    const gradient = ctx.createRadialGradient(
                        star.x, star.y, 0,
                        star.x, star.y, star.radius * 3
                    );
                    
                    gradient.addColorStop(0, `rgba(255, 255, 255, ${star.brightness * twinkle})`);
                    gradient.addColorStop(0.5, `rgba(200, 220, 255, ${star.brightness * twinkle * 0.5})`);
                    gradient.addColorStop(1, 'rgba(100, 150, 255, 0)');
                    
                    ctx.fillStyle = gradient;
                    ctx.fill();
                    
                    // –î–≤–∏–∂–µ–Ω–∏–µ –∑–≤—ë–∑–¥ (–ø–∞—Ä–∞–ª–ª–∞–∫—Å —ç—Ñ—Ñ–µ–∫—Ç)
                    star.x += (rotationX * 0.01) * star.speed;
                    star.y += (rotationY * 0.01) * star.speed;
                    
                    // –í–æ–∑–≤—Ä–∞—Ç –∑–≤–µ–∑–¥—ã –Ω–∞ —ç–∫—Ä–∞–Ω
                    if (star.x < 0) star.x = canvas.width;
                    if (star.x > canvas.width) star.x = 0;
                    if (star.y < 0) star.y = canvas.height;
                    if (star.y > canvas.height) star.y = 0;
                });
                
                requestAnimationFrame(animateStars);
            }
            
            animateStars();
        }
        
        // ========== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ß–ê–°–¢–ò–¶ ==========
        function initParticles() {
            particlesContainer.innerHTML = '';
            particles = [];
            
            for (let i = 0; i < PARTICLE_COUNT; i++) {
                createParticle();
            }
            
            // –ê–Ω–∏–º–∞—Ü–∏—è —á–∞—Å—Ç–∏—Ü
            function animateParticles() {
                particles.forEach((particle, index) => {
                    if (!particle.element) return;
                    
                    // –î–≤–∏–∂–µ–Ω–∏–µ —á–∞—Å—Ç–∏—Ü
                    particle.x += particle.vx;
                    particle.y += particle.vy;
                    
                    // –ì—Ä–∞–≤–∏—Ç–∞—Ü–∏—è –∫ —Ü–µ–Ω—Ç—Ä—É
                    const dx = window.innerWidth / 2 - particle.x;
                    const dy = window.innerHeight / 2 - particle.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance > 100) {
                        particle.vx += dx * 0.0001;
                        particle.vy += dy * 0.0001;
                    }
                    
                    // –≠—Ñ—Ñ–µ–∫—Ç –æ—Ç –≥–∏—Ä–æ—Å–∫–æ–ø–∞
                    particle.vx += rotationX * 0.001;
                    particle.vy += rotationY * 0.001;
                    
                    // –ó–∞—Ç—É—Ö–∞–Ω–∏–µ
                    particle.vx *= 0.99;
                    particle.vy *= 0.99;
                    
                    // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏
                    const speed = Math.sqrt(particle.vx * particle.vx + particle.vy * particle.vy);
                    if (speed > 2) {
                        particle.vx = (particle.vx / speed) * 2;
                        particle.vy = (particle.vy / speed) * 2;
                    }
                    
                    // –ì—Ä–∞–Ω–∏—Ü—ã
                    if (particle.x < 0 || particle.x > window.innerWidth) {
                        particle.vx *= -0.8;
                        particle.x = particle.x < 0 ? 0 : window.innerWidth;
                    }
                    
                    if (particle.y < 0 || particle.y > window.innerHeight) {
                        particle.vy *= -0.8;
                        particle.y = particle.y < 0 ? 0 : window.innerHeight;
                    }
                    
                    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏
                    particle.element.style.transform = `translate(${particle.x}px, ${particle.y}px)`;
                    particle.element.style.opacity = particle.opacity;
                    
                    // –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–æ–∑–∏—Ü–∏–∏
                    const hue = (particle.x / window.innerWidth * 360 + Date.now() * 0.01 + index * 10) % 360;
                    particle.element.style.backgroundColor = `hsl(${hue}, 100%, 70%)`;
                    particle.element.style.boxShadow = `0 0 ${particle.size * 2}px hsl(${hue}, 100%, 50%)`;
                    
                    // –ú–µ—Ä—Ü–∞–Ω–∏–µ
                    particle.opacity = 0.3 + Math.sin(Date.now() * 0.001 + index) * 0.2;
                });
                
                requestAnimationFrame(animateParticles);
            }
            
            animateParticles();
        }
        
        function createParticle() {
            const particle = document.createElement('div');
            particle.className = 'particle';
            
            const size = Math.random() * 3 + 2;
            particle.style.width = `${size}px`;
            particle.style.height = `${size}px`;
            
            const x = Math.random() * window.innerWidth;
            const y = Math.random() * window.innerHeight;
            
            particle.style.left = `${x}px`;
            particle.style.top = `${y}px`;
            
            particlesContainer.appendChild(particle);
            
            particles.push({
                element: particle,
                x: x,
                y: y,
                vx: (Math.random() - 0.5) * 2,
                vy: (Math.random() - 0.5) * 2,
                size: size,
                opacity: 0.5
            });
        }
        
        // ========== –û–ë–†–ê–ë–û–¢–ß–ò–ö –ì–ò–†–û–°–ö–û–ü–ê ==========
        function handleOrientation(event) {
            alpha = event.alpha;  // 0-360
            beta = event.beta;    // -180 to 180
            gamma = event.gamma;  // -90 to 90
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
            document.getElementById('alphaValue').textContent = alpha !== null ? alpha.toFixed(2) + '¬∞' : 'N/A';
            document.getElementById('betaValue').textContent = beta !== null ? beta.toFixed(2) + '¬∞' : 'N/A';
            document.getElementById('gammaValue').textContent = gamma !== null ? gamma.toFixed(2) + '¬∞' : 'N/A';
            
            // –í–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä—ã
            if (alpha !== null) {
                const alphaPercent = (alpha % 180) / 180 * 100;
                document.getElementById('alphaBar').style.width = `${alphaPercent}%`;
            }
            
            if (beta !== null) {
                const betaPercent = (beta + 180) / 360 * 100;
                document.getElementById('betaBar').style.width = `${betaPercent}%`;
            }
            
            if (gamma !== null) {
                const gammaPercent = (gamma + 90) / 180 * 100;
                document.getElementById('gammaBar').style.width = `${gammaPercent}%`;
            }
            
            // –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ —É–≥–ª—ã –≤—Ä–∞—â–µ–Ω–∏—è
            if (beta !== null && gamma !== null) {
                targetRotationX = Math.max(Math.min(beta * 0.7, MAX_ROTATION), -MAX_ROTATION);
                targetRotationY = Math.max(Math.min(gamma * 1.5, MAX_ROTATION * 2), -MAX_ROTATION * 2);
            }
        }
        
        // ========== –ê–ù–ò–ú–ê–¶–ò–Ø –ò –†–ï–ù–î–ï–†–ò–ù–ì ==========
        function animate() {
            // –ü–ª–∞–≤–Ω–∞—è –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è
            currentRotationX += (targetRotationX - currentRotationX) * SMOOTHING_FACTOR;
            currentRotationY += (targetRotationY - currentRotationY) * SMOOTHING_FACTOR;
            
            // –ê–≤—Ç–æ–≤—Ä–∞—â–µ–Ω–∏–µ
            if (autoRotation) {
                const time = Date.now() * 0.001;
                currentRotationX = Math.sin(time * 0.5) * 20;
                currentRotationY += 0.5;
            }
            
            // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤—Ä–∞—â–µ–Ω–∏—è –∫ —Å—Ü–µ–Ω–µ
            let transform = '';
            
            if (hypercubeMode) {
                // –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è –≥–∏–ø–µ—Ä–∫—É–±–∞ (4D —ç—Ñ—Ñ–µ–∫—Ç)
                const hyperRotation = Date.now() * 0.001;
                transform = `
                    rotateX(${currentRotationX}deg) 
                    rotateY(${currentRotationY}deg)
                    rotate3d(1, 1, 1, ${hyperRotation}rad)
                    scale3d(1.2, 1.2, 1.2)
                `;
                
                // –ê–Ω–∏–º–∞—Ü–∏—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∫—É–±–∞
                const innerCube = tesseract.querySelector('.cube-inner');
                if (innerCube) {
                    innerCube.style.transform = `
                        translateZ(75px) 
                        scale(${0.5 + Math.sin(hyperRotation) * 0.1})
                        rotateX(${hyperRotation * 30}deg)
                        rotateY(${hyperRotation * 40}deg)
                    `;
                }
                
                // –ê–Ω–∏–º–∞—Ü–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
                const connections = tesseract.querySelectorAll('.connection');
                connections.forEach((conn, i) => {
                    const angle = (i / connections.length) * Math.PI * 2 + hyperRotation;
                    conn.style.height = `${75 + Math.sin(hyperRotation * 2 + i) * 20}px`;
                    conn.style.opacity = `${0.5 + Math.sin(hyperRotation + i) * 0.5}`;
                    conn.style.background = `linear-gradient(to bottom, 
                        hsl(${hyperRotation * 50 + i * 30}, 100%, 60%), 
                        hsl(${hyperRotation * 50 + i * 30 + 60}, 100%, 60%))`;
                });
            } else {
                // –û–±—ã—á–Ω—ã–π 3D —Ä–µ–∂–∏–º
                transform = `
                    rotateX(${currentRotationX}deg) 
                    rotateY(${-currentRotationY}deg)
                    rotateZ(${currentRotationX * 0.1}deg)
                `;
            }
            
            scene3d.style.transform = transform;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
            rotationX = currentRotationX;
            rotationY = currentRotationY;
            
            document.getElementById('rotateXValue').textContent = currentRotationX.toFixed(2) + '¬∞';
            document.getElementById('rotateYValue').textContent = currentRotationY.toFixed(2) + '¬∞';
            
            // FPS —Å—á–µ—Ç—á–∏–∫
            frameCount++;
            const now = performance.now();
            if (now >= lastTime + 1000) {
                fps = Math.round((frameCount * 1000) / (now - lastTime));
                frameCount = 0;
                lastTime = now;
                document.getElementById('fpsValue').textContent = fps;
            }
            
            requestAnimationFrame(animate);
        }
        
        // ========== –£–ü–†–ê–í–õ–ï–ù–ò–ï –ú–´–®–¨–Æ (–¥–ª—è –ü–ö) ==========
        function initMouseControl() {
            let isDragging = false;
            
            scene3d.parentElement.addEventListener('mousedown', (e) => {
                isDragging = true;
                lastMouseX = e.clientX;
                lastMouseY = e.clientY;
                mouseControl = true;
                e.preventDefault();
            });
            
            document.addEventListener('mousemove', (e) => {
                if (!isDragging) return;
                
                const deltaX = e.clientX - lastMouseX;
                const deltaY = e.clientY - lastMouseY;
                
                targetRotationY += deltaX * 0.5;
                targetRotationX -= deltaY * 0.5;
                
                // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ
                targetRotationX = Math.max(Math.min(targetRotationX, MAX_ROTATION), -MAX_ROTATION);
                targetRotationY = Math.max(Math.min(targetRotationY, MAX_ROTATION * 2), -MAX_ROTATION * 2);
                
                lastMouseX = e.clientX;
                lastMouseY = e.clientY;
            });
            
            document.addEventListener('mouseup', () => {
                isDragging = false;
            });
            
            // –°–µ–Ω—Å–æ—Ä–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
            scene3d.parentElement.addEventListener('touchstart', (e) => {
                if (e.touches.length === 1) {
                    isDragging = true;
                    lastMouseX = e.touches[0].clientX;
                    lastMouseY = e.touches[0].clientY;
                    mouseControl = true;
                    e.preventDefault();
                }
            });
            
            document.addEventListener('touchmove', (e) => {
                if (!isDragging || e.touches.length !== 1) return;
                
                const deltaX = e.touches[0].clientX - lastMouseX;
                const deltaY = e.touches[0].clientY - lastMouseY;
                
                targetRotationY += deltaX * 0.8;
                targetRotationX -= deltaY * 0.8;
                
                targetRotationX = Math.max(Math.min(targetRotationX, MAX_ROTATION), -MAX_ROTATION);
                targetRotationY = Math.max(Math.min(targetRotationY, MAX_ROTATION * 2), -MAX_ROTATION * 2);
                
                lastMouseX = e.touches[0].clientX;
                lastMouseY = e.touches[0].clientY;
                
                e.preventDefault();
            });
            
            document.addEventListener('touchend', () => {
                isDragging = false;
            });
        }
        
        // ========== –£–ü–†–ê–í–õ–ï–ù–ò–ï –†–ï–ñ–ò–ú–ê–ú–ò ==========
        function initControls() {
            const mode3dBtn = document.getElementById('mode3d');
            const mode4dBtn = document.getElementById('mode4d');
            const modeSpinBtn = document.getElementById('modeSpin');
            const resetBtn = document.getElementById('resetBtn');
            
            mode3dBtn.addEventListener('click', () => {
                hypercubeMode = false;
                mode3dBtn.classList.add('active');
                mode4dBtn.classList.remove('active');
                tesseract.style.animation = 'none';
                setTimeout(() => {
                    tesseract.style.animation = 'pulse 3s ease-in-out infinite';
                }, 10);
            });
            
            mode4dBtn.addEventListener('click', () => {
                hypercubeMode = true;
                mode4dBtn.classList.add('active');
                mode3dBtn.classList.remove('active');
            });
            
            modeSpinBtn.addEventListener('click', () => {
                autoRotation = !autoRotation;
                modeSpinBtn.classList.toggle('active');
                modeSpinBtn.innerHTML = autoRotation ? 
                    '<i class="fas fa-pause"></i> –°—Ç–æ–ø' : 
                    '<i class="fas fa-sync-alt"></i> –ê–≤—Ç–æ–≤—Ä–∞—â–µ–Ω–∏–µ';
                
                if (autoRotation) {
                    mouseControl = false;
                }
            });
            
            resetBtn.addEventListener('click', () => {
                targetRotationX = 0;
                targetRotationY = 0;
                autoRotation = false;
                modeSpinBtn.classList.remove('active');
                modeSpinBtn.innerHTML = '<i class="fas fa-sync-alt"></i> –ê–≤—Ç–æ–≤—Ä–∞—â–µ–Ω–∏–µ';
                
                // –°–±—Ä–æ—Å –≥–∏–ø–µ—Ä–∫—É–±–∞
                const innerCube = tesseract.querySelector('.cube-inner');
                if (innerCube) {
                    innerCube.style.transform = 'translateZ(75px) scale(0.5)';
                }
                
                const connections = tesseract.querySelectorAll('.connection');
                connections.forEach(conn => {
                    conn.style.height = '75px';
                    conn.style.opacity = '0.8';
                });
            });
        }
        
        // ========== iOS –†–ê–ó–†–ï–®–ï–ù–ò–Ø ==========
        function checkIOSPermission() {
            if (typeof DeviceOrientationEvent !== 'undefined' && 
                typeof DeviceOrientationEvent.requestPermission === 'function') {
                
                const modal = document.getElementById('iosPermissionModal');
                modal.style.display = 'flex';
                
                document.getElementById('iosPermissionBtn').addEventListener('click', () => {
                    DeviceOrientationEvent.requestPermission()
                        .then(permissionState => {
                            if (permissionState === 'granted') {
                                window.addEventListener('deviceorientation', handleOrientation);
                                modal.style.display = 'none';
                                showNotification('–î–æ—Å—Ç—É–ø –∫ –¥–∞—Ç—á–∏–∫–∞–º —Ä–∞–∑—Ä–µ—à—ë–Ω!');
                            } else {
                                showNotification('–î–æ—Å—Ç—É–ø –æ—Ç–∫–ª–æ–Ω—ë–Ω. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–ª—å—Ü–µ–º.');
                            }
                        })
                        .catch(console.error);
                });
            } else {
                // –î–ª—è Android –∏ –¥—Ä—É–≥–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
                window.addEventListener('deviceorientation', handleOrientation);
            }
        }
        
        // ========== –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø ==========
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: rgba(20, 20, 40, 0.95);
                color: #33ffcc;
                padding: 15px 30px;
                border-radius: 15px;
                border: 1px solid #33ffcc;
                box-shadow: 0 10px 30px rgba(0,0,0,0.5);
                z-index: 10000;
                font-weight: bold;
                backdrop-filter: blur(10px);
                animation: fadeInUp 0.5s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateX(-50%) translateY(-20px)';
                setTimeout(() => notification.remove(), 500);
            }, 3000);
        }
        
        // ========== –ó–ê–ì–†–£–ó–ö–ê ==========
        function simulateLoading() {
            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress > 100) progress = 100;
                loadingProgress.style.width = `${progress}%`;
                
                if (progress >= 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        loadingOverlay.style.opacity = '0';
                        setTimeout(() => {
                            loadingOverlay.style.display = 'none';
                            showNotification('–°–∏—Å—Ç–µ–º–∞ 4D-–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞!');
                        }, 1000);
                    }, 500);
                }
            }, 100);
        }
        
        // ========== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ==========
        function init() {
            console.log('üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è HyperCube 4D...');
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
            initStars();
            initParticles();
            initMouseControl();
            initControls();
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –¥–ª—è iOS
            checkIOSPermission();
            
            // –°–∏–º—É–ª—è—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
            simulateLoading();
            
            // –ó–∞–ø—É—Å–∫ –∞–Ω–∏–º–∞—Ü–∏–∏
            animate();
            
            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
            setTimeout(() => {
                document.querySelectorAll('.fade-in-up').forEach((el, i) => {
                    el.style.animationDelay = `${i * 0.1}s`;
                });
            }, 100);
            
            // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ –∫–æ–Ω—Å–æ–ª—å
            console.log('‚úÖ –°–∏—Å—Ç–µ–º–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞');
            console.log('üì± –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:');
            console.log('   - –ù–∞–∫–ª–æ–Ω —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –¥–ª—è 3D-–≤—Ä–∞—â–µ–Ω–∏—è');
            console.log('   - –ö–Ω–æ–ø–∫–∏ —Ä–µ–∂–∏–º–æ–≤ –≤–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞');
            console.log('   - –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è');
        }
        
        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏ –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('load', init);
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
        window.addEventListener('error', (e) => {
            console.error('‚ùå –û—à–∏–±–∫–∞:', e.error);
            showNotification('–û—à–∏–±–∫–∞ —Å–∏—Å—Ç–µ–º—ã. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.');
        });
        
        // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∂–µ—Å—Ç–æ–≤
        document.addEventListener('gesturestart', (e) => e.preventDefault());
        document.addEventListener('gesturechange', (e) => e.preventDefault());
        document.addEventListener('gestureend', (e) => e.preventDefault());
        
        // –≠–∫—Å–ø–æ—Ä—Ç –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
        window.app = {
            setRotation: (x, y) => {
                targetRotationX = x;
                targetRotationY = y;
            },
            toggleHypercube: () => {
                hypercubeMode = !hypercubeMode;
                document.getElementById('mode4d').classList.toggle('active');
                document.getElementById('mode3d').classList.toggle('active');
            },
            getSensorData: () => ({
                alpha, beta, gamma,
                rotationX, rotationY
            })
        };
        
        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
        function createConnectionLines() {
            const tesseract = document.getElementById('tesseract');
            for (let i = 0; i < 8; i++) {
                const line = document.createElement('div');
                line.className = 'connection';
                const angle = (i / 8) * Math.PI * 2;
                line.style.transform = `
                    translate(-50%, -50%) 
                    rotateX(${Math.sin(angle) * 45}deg) 
                    rotateY(${Math.cos(angle) * 45}deg)
                `;
                tesseract.appendChild(line);
            }
        }
        
        createConnectionLines();
        
        // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ –≥—Ä–∞–Ω–µ–π
        function animateFaces() {
            const faces = document.querySelectorAll('.face');
            const time = Date.now() * 0.001;
            
            faces.forEach((face, i) => {
                const hue = (time * 20 + i * 30) % 360;
                const saturation = 80 + Math.sin(time + i) * 20;
                
                face.style.borderImageSource = `
                    linear-gradient(45deg, 
                        hsl(${hue}, ${saturation}%, 60%), 
                        hsl(${hue + 60}, ${saturation}%, 60%)
                    )
                `;
                
                // –ú–µ—Ä—Ü–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
                const text = face.querySelector('span');
                if (text) {
                    text.style.textShadow = `
                        0 0 10px hsl(${hue}, 100%, 70%),
                        0 0 20px hsl(${hue}, 100%, 50%),
                        0 0 30px hsl(${hue}, 100%, 30%)
                    `;
                }
            });
            
            requestAnimationFrame(animateFaces);
        }
        
        animateFaces();
    </script>
</body>
</html>